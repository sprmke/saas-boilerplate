{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmanlulu/Projects/personal-projects/rental-property-app/client/src/state/index.ts"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nexport const initialState = {};\n\nexport const globalSlice = createSlice({\n  name: 'global',\n  initialState,\n  reducers: {},\n});\n\nexport const {} = globalSlice.actions;\n\nexport default globalSlice.reducer;\n"],"names":[],"mappings":";;;;;AAAA;;AAEO,MAAM,eAAe,CAAC;AAEtB,MAAM,cAAc,CAAA,GAAA,kYAAA,CAAA,cAAW,AAAD,EAAE;IACrC,MAAM;IACN;IACA,UAAU,CAAC;AACb;AAEO,MAAM,EAAE,GAAG,YAAY,OAAO;uCAEtB,YAAY,OAAO","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmanlulu/Projects/personal-projects/rental-property-app/client/src/state/api.ts"],"sourcesContent":["import { fetchAuthSession, getCurrentUser } from 'aws-amplify/auth';\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nimport { Tenant, Manager } from '@/types/prismaTypes';\nimport { createNewUserInDatabase, IdToken } from '@/lib/utils';\n\nexport const api = createApi({\n  baseQuery: fetchBaseQuery({\n    baseUrl: process.env.NEXT_PUBLIC_API_BASE_URL,\n    prepareHeaders: async (headers) => {\n      const session = await fetchAuthSession();\n      const { idToken } = session.tokens ?? {};\n      if (idToken) {\n        headers.set('Authorization', `Bearer ${idToken}`);\n      }\n      return headers;\n    },\n  }),\n  reducerPath: 'api',\n  tagTypes: [],\n  endpoints: (build) => ({\n    getAuthUser: build.query<User, void>({\n      queryFn: async (_arg, _queryApi, _extraOptions, fetchWithBaseQuery) => {\n        try {\n          const session = await fetchAuthSession();\n          const { idToken } = session.tokens ?? {};\n          const user = await getCurrentUser();\n          const userRole = idToken?.payload['custom:role'] as string;\n\n          const endpoint = `/${\n            userRole === 'manager' ? 'managers' : 'tenants'\n          }/${user.userId}`;\n\n          let userDetailsResponse = await fetchWithBaseQuery(endpoint);\n          console.log('userDetailsResponse::', userDetailsResponse);\n\n          // If user doesn't exist, create new user\n          if (\n            userDetailsResponse.error &&\n            userDetailsResponse.error.status === 404\n          ) {\n            userDetailsResponse = await createNewUserInDatabase(\n              user,\n              idToken as IdToken,\n              userRole,\n              fetchWithBaseQuery\n            );\n          }\n\n          return {\n            data: {\n              cognitoInfo: { ...user },\n              userInfo: userDetailsResponse.data as Tenant | Manager,\n              userRole,\n            },\n          };\n        } catch (error: any) {\n          return { error: error.message || 'Failed to fetch user data' };\n        }\n      },\n    }),\n  }),\n});\n\nexport const { useGetAuthUserQuery } = api;\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;AAEA;;;;AAEO,MAAM,MAAM,CAAA,GAAA,yZAAA,CAAA,YAAS,AAAD,EAAE;IAC3B,WAAW,CAAA,GAAA,uXAAA,CAAA,iBAAc,AAAD,EAAE;QACxB,OAAO;QACP,gBAAgB,OAAO;YACrB,MAAM,UAAU,MAAM,CAAA,GAAA,uQAAA,CAAA,mBAAgB,AAAD;YACrC,MAAM,EAAE,OAAO,EAAE,GAAG,QAAQ,MAAM,IAAI,CAAC;YACvC,IAAI,SAAS;gBACX,QAAQ,GAAG,CAAC,iBAAiB,CAAC,OAAO,EAAE,SAAS;YAClD;YACA,OAAO;QACT;IACF;IACA,aAAa;IACb,UAAU,EAAE;IACZ,WAAW,CAAC,QAAU,CAAC;YACrB,aAAa,MAAM,KAAK,CAAa;gBACnC,SAAS,OAAO,MAAM,WAAW,eAAe;oBAC9C,IAAI;wBACF,MAAM,UAAU,MAAM,CAAA,GAAA,uQAAA,CAAA,mBAAgB,AAAD;wBACrC,MAAM,EAAE,OAAO,EAAE,GAAG,QAAQ,MAAM,IAAI,CAAC;wBACvC,MAAM,OAAO,MAAM,CAAA,GAAA,2TAAA,CAAA,iBAAc,AAAD;wBAChC,MAAM,WAAW,SAAS,OAAO,CAAC,cAAc;wBAEhD,MAAM,WAAW,CAAC,CAAC,EACjB,aAAa,YAAY,aAAa,UACvC,CAAC,EAAE,KAAK,MAAM,EAAE;wBAEjB,IAAI,sBAAsB,MAAM,mBAAmB;wBACnD,QAAQ,GAAG,CAAC,yBAAyB;wBAErC,yCAAyC;wBACzC,IACE,oBAAoB,KAAK,IACzB,oBAAoB,KAAK,CAAC,MAAM,KAAK,KACrC;4BACA,sBAAsB,MAAM,CAAA,GAAA,mHAAA,CAAA,0BAAuB,AAAD,EAChD,MACA,SACA,UACA;wBAEJ;wBAEA,OAAO;4BACL,MAAM;gCACJ,aAAa;oCAAE,GAAG,IAAI;gCAAC;gCACvB,UAAU,oBAAoB,IAAI;gCAClC;4BACF;wBACF;oBACF,EAAE,OAAO,OAAY;wBACnB,OAAO;4BAAE,OAAO,MAAM,OAAO,IAAI;wBAA4B;oBAC/D;gBACF;YACF;QACF,CAAC;AACH;AAEO,MAAM,EAAE,mBAAmB,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmanlulu/Projects/personal-projects/rental-property-app/client/src/state/redux.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRef } from 'react';\n\nimport { combineReducers, configureStore } from '@reduxjs/toolkit';\nimport { setupListeners } from '@reduxjs/toolkit/query';\nimport {\n  TypedUseSelectorHook,\n  useDispatch,\n  useSelector,\n  Provider,\n} from 'react-redux';\n\nimport globalReducer from '@/state';\nimport { api } from '@/state/api';\n\n/* REDUX STORE */\nconst rootReducer = combineReducers({\n  global: globalReducer,\n  [api.reducerPath]: api.reducer,\n});\n\nexport const makeStore = () => {\n  return configureStore({\n    reducer: rootReducer,\n    middleware: (getDefaultMiddleware) =>\n      getDefaultMiddleware().concat(api.middleware),\n  });\n};\n\n/* REDUX TYPES */\nexport type AppStore = ReturnType<typeof makeStore>;\nexport type RootState = ReturnType<AppStore['getState']>;\nexport type AppDispatch = AppStore['dispatch'];\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\n/* PROVIDER */\nexport default function StoreProvider({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const storeRef = useRef<AppStore | null>(null);\n  if (!storeRef.current) {\n    storeRef.current = makeStore();\n    setupListeners(storeRef.current.dispatch);\n  }\n  return <Provider store={storeRef.current}>{children}</Provider>;\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AAAA;AACA;AACA;AAOA;AACA;AAfA;;;;;;;;AAiBA,eAAe,GACf,MAAM,cAAc,CAAA,GAAA,yLAAA,CAAA,kBAAe,AAAD,EAAE;IAClC,QAAQ,qHAAA,CAAA,UAAa;IACrB,CAAC,mHAAA,CAAA,MAAG,CAAC,WAAW,CAAC,EAAE,mHAAA,CAAA,MAAG,CAAC,OAAO;AAChC;AAEO,MAAM,YAAY;IACvB,OAAO,CAAA,GAAA,kYAAA,CAAA,iBAAc,AAAD,EAAE;QACpB,SAAS;QACT,YAAY,CAAC,uBACX,uBAAuB,MAAM,CAAC,mHAAA,CAAA,MAAG,CAAC,UAAU;IAChD;AACF;AAMO,MAAM,iBAAiB,IAAM,CAAA,GAAA,kSAAA,CAAA,cAAW,AAAD;AACvC,MAAM,iBAAkD,kSAAA,CAAA,cAAW;AAG3D,SAAS,cAAc,EACpC,QAAQ,EAGT;IACC,MAAM,WAAW,CAAA,GAAA,8YAAA,CAAA,SAAM,AAAD,EAAmB;IACzC,IAAI,CAAC,SAAS,OAAO,EAAE;QACrB,SAAS,OAAO,GAAG;QACnB,CAAA,GAAA,uXAAA,CAAA,iBAAc,AAAD,EAAE,SAAS,OAAO,CAAC,QAAQ;IAC1C;IACA,qBAAO,ubAAC,kSAAA,CAAA,WAAQ;QAAC,OAAO,SAAS,OAAO;kBAAG;;;;;;AAC7C","debugId":null}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmanlulu/Projects/personal-projects/rental-property-app/client/src/app/%28auth%29/authProvider.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport { usePathname, useRouter } from 'next/navigation';\n\nimport { Amplify } from 'aws-amplify';\nimport {\n  Authenticator,\n  Heading,\n  Radio,\n  RadioGroupField,\n  useAuthenticator,\n  View,\n} from '@aws-amplify/ui-react';\n\nimport '@aws-amplify/ui-react/styles.css';\n\n// docs.amplify.aws/gen1/javascript/tools/libraries/configure-categories\nhttps: Amplify.configure({\n  Auth: {\n    Cognito: {\n      userPoolId: process.env.NEXT_PUBLIC_AWS_COGNITO_USER_POOL_ID!,\n      userPoolClientId:\n        process.env.NEXT_PUBLIC_AWS_COGNITO_USER_POOL_CLIENT_ID!,\n    },\n  },\n});\n\nconst components = {\n  Header() {\n    return (\n      <View className=\"mt-4 mb-7 text-center\">\n        <Heading level={3} className=\"!text-2xl !font-bold\">\n          KAME\n          <span className=\"text-secondary-500 font-light hover:!text-primary-300\">\n            HOMES\n          </span>\n        </Heading>\n        <p className=\"text-muted-foreground mt-2\">Please sign in to continue</p>\n      </View>\n    );\n  },\n  SignIn: {\n    Footer() {\n      const { toSignUp } = useAuthenticator();\n      return (\n        <View className=\"text-center mt-4\">\n          <p className=\"text-muted-foreground\">\n            Don&apos;t have an account?{' '}\n            <button\n              onClick={toSignUp}\n              className=\"text-primary hover:underline bg-transparent border-none p-0\"\n            >\n              Sign up here\n            </button>\n          </p>\n        </View>\n      );\n    },\n  },\n  SignUp: {\n    FormFields() {\n      const { validationErrors } = useAuthenticator();\n\n      return (\n        <>\n          <Authenticator.SignUp.FormFields />\n          <RadioGroupField\n            legend=\"Role\"\n            name=\"custom:role\"\n            errorMessage={validationErrors?.['custom:role']}\n            hasError={!!validationErrors?.['custom:role']}\n            isRequired\n          >\n            <Radio value=\"tenant\" className=\"cursor-pointer\">\n              Tenant\n            </Radio>\n            <Radio value=\"manager\" className=\"cursor-pointer\">\n              Manager\n            </Radio>\n          </RadioGroupField>\n        </>\n      );\n    },\n\n    Footer() {\n      const { toSignIn } = useAuthenticator();\n      return (\n        <View className=\"text-center mt-4\">\n          <p className=\"text-muted-foreground\">\n            Already have an account?{' '}\n            <button\n              onClick={toSignIn}\n              className=\"text-primary hover:underline bg-transparent border-none p-0\"\n            >\n              Sign in\n            </button>\n          </p>\n        </View>\n      );\n    },\n  },\n};\n\nconst formFields = {\n  signIn: {\n    username: {\n      placeholder: 'Enter your email',\n      label: 'Email',\n      isRequired: true,\n    },\n    password: {\n      placeholder: 'Enter your password',\n      label: 'Password',\n      isRequired: true,\n    },\n  },\n  signUp: {\n    username: {\n      order: 1,\n      placeholder: 'Choose a username',\n      label: 'Username',\n      isRequired: true,\n    },\n    email: {\n      order: 2,\n      placeholder: 'Enter your email address',\n      label: 'Email',\n      isRequired: true,\n    },\n    password: {\n      order: 3,\n      placeholder: 'Create a password',\n      label: 'Password',\n      isRequired: true,\n    },\n    confirm_password: {\n      order: 4,\n      placeholder: 'Confirm your password',\n      label: 'Confirm Password',\n      isRequired: true,\n    },\n  },\n};\n\nconst Auth = ({ children }: { children: React.ReactNode }) => {\n  const { user } = useAuthenticator((context) => [context.user]);\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const isAuthPage = pathname.match(/^\\/(signin|signup)$/);\n  const isDashboardPage =\n    pathname.startsWith('/manager') || pathname.startsWith('/tenants');\n\n  useEffect(() => {\n    // Redirect authenticated users\n    if (user && isAuthPage) {\n      router.push('/landing');\n    }\n  }, [user, isAuthPage, router]);\n\n  // Allow access to public pages without authentication\n  if (!isAuthPage && !isDashboardPage) {\n    return <>{children}</>;\n  }\n\n  return (\n    <div className=\"h-full\">\n      <Authenticator\n        initialState={pathname.includes('signup') ? 'signUp' : 'signIn'}\n        components={components}\n        formFields={formFields}\n      >\n        {() => <>{children}</>}\n      </Authenticator>\n    </div>\n  );\n};\n\nexport default Auth;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 503, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmanlulu/Projects/personal-projects/rental-property-app/client/src/app/providers.tsx"],"sourcesContent":["'use client';\n\nimport { Authenticator } from '@aws-amplify/ui-react';\n\nimport StoreProvider from '@/state/redux';\nimport Auth from '@/app/(auth)/authProvider';\n\nconst Providers = ({ children }: { children: React.ReactNode }) => {\n  return (\n    <StoreProvider>\n      <Authenticator.Provider>\n        <Auth>{children}</Auth>\n      </Authenticator.Provider>\n    </StoreProvider>\n  );\n};\n\nexport default Providers;\n"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AALA;;;;;AAOA,MAAM,YAAY,CAAC,EAAE,QAAQ,EAAiC;IAC5D,qBACE,ubAAC,sHAAA,CAAA,UAAa;kBACZ,cAAA,ubAAC,kaAAA,CAAA,gBAAa,CAAC,QAAQ;sBACrB,cAAA,ubAAC,uIAAA,CAAA,UAAI;0BAAE;;;;;;;;;;;;;;;;AAIf;uCAEe","debugId":null}}]
}